<div class="guide_wrap">
    <div class="floor_select">
        <img src="/wp-content/uploads/2020/11/floor_main02.png" alt="국민건강검진센터 건물 이미지" id="health_floor">
        <img src="/wp-content/uploads/2020/11/floor_new03.png" alt="본관 건물 이미지" class="main_floor">
        <div>
            <a href="javascript:void(0)" class="health_floor">본관</a>
            <a href="javascript:void(0)" class="main_floor">수술센터</a>
        </div>
    </div>
    <div class="floor_info">
        <div class="center" style="display:none;">
            <ul class="fnav">
                <li id="centerOrg">
                    <span>2F</span>
                    <div style="z-index: 999;">
                        <h5>본관 2F</h5>
                        <ul>
                            <li class="on"><a href="javascript:void(0)">MRI</a></li>
                            <li class=""><a href="javascript:void(0)">CT</a></li>
                            <li class=""><a href="javascript:void(0)">영상진단센터</a></li>
                            <li class=""><a href="javascript:void(0)">고양이병원대기실</a></li>
                            <li class=""><a href="javascript:void(0)">고양이진료실</a></li>
                        </ul>
                        <div style="position: absolute;
                        bottom: 10px;
                        right: 5px;">
                            <img src="/wp-content/uploads/2020/11/0772.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0778.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0787.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0707.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0760.jpg" alt="자기장 치료실" style="display: none;">
                        </div>
                    </div>
                    <!-- 2018-04-26 추가 -->
                    <div class="cont_bg">
                        <img src="/wp-content/uploads/2020/11/0772.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0778.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0787.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0707.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0760.jpg" alt="자기장 치료실" style="display: none;">
                    </div>
                    <!-- //2018-04-26 추가 -->
                </li>
                <li class="on">
                    <span>1F</span>
                    <div style="z-index: 999;">
                        <h5>본관 1F</h5>
                        <ul>
                            <li class="on"><a href="javascript:void(0)">로비</a></li>
                            <li class=""><a href="javascript:void(0)">대기실</a></li>
                            <li class=""><a href="javascript:void(0)">처치실</a></li>
                            <li class=""><a href="javascript:void(0)">고객지원팀</a></li>
                            <li class=""><a href="javascript:void(0)">진료실1</a></li>
                            <li class=""><a href="javascript:void(0)">진료실2</a></li>
                        </ul>
                        <div style="position: absolute;
                        bottom: 10px;
                        right: 5px;">
                            <img src="/wp-content/uploads/2020/11/0040.jpg" alt="자기장 치료실" style="display: block;">
                            <img src="/wp-content/uploads/2020/11/0028.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0590.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0602.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0674.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0680.jpg" alt="자기장 치료실" style="display: none;">
                        </div>
                    </div>
                    <!-- 2018-04-26 추가 -->
                    <div class="cont_bg">
                        <img id="index1" src="/wp-content/uploads/2020/11/0040.jpg" alt="자기장 치료실" style="display: block;">
                        <img src="/wp-content/uploads/2020/11/0028.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0590.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0602.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0674.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0680.jpg" alt="자기장 치료실" style="display: none;">
                    </div>
                    <!-- //2018-04-26 추가 -->
                </li>
            </ul>
        </div>
        <div class="main" style="display:none;">
            <ul class="fnav">
                <li id="mainOrg">
                    <span>3F</span>
                    <div style="z-index: 999;">
                        <h5>수술센터 3F</h5>
                        <ul>
                            <li class="on"><a href="javascript:void(0)">컨퍼런스 홀</a></li>
                        </ul>
                        <div style="position: absolute;
                        bottom: 10px;
                        right: 5px;">
                            <img src="/wp-content/uploads/2020/11/0057.jpg" alt="자기장 치료실" style="display: block;">
                        </div>
                    </div>
                    <!-- 2018-04-26 추가 -->
                    <div class="cont_bg">
                        <img src="/wp-content/uploads/2020/11/0057.jpg" alt="자기장 치료실" style="display: block;">
                    </div>
                    <!-- //2018-04-26 추가 -->
                </li>
                <li>
                    <span>2F</span>
                    <div style="z-index: 999;">
                        <h5>수술센터 2F</h5>
                        <ul>
                            <li class="on"><a href="javascript:void(0)">첨단수술센터</a></li>
                            <li class=""><a href="javascript:void(0)">N Unit</a></li>
                            <li class=""><a href="javascript:void(0)">G Unit</a></li>
                            <li class=""><a href="javascript:void(0)">M Unit</a></li>
                        </ul>
                        <div style="position: absolute;
                        bottom: 10px;
                        right: 5px;">
                            <img src="/wp-content/uploads/2020/11/0153.jpg" alt="자기장 치료실" style="display: block;">
                            <img src="/wp-content/uploads/2020/11/0189.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0177.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0165.jpg" alt="자기장 치료실" style="display: none;">
                        </div>
                    </div>
                    <!-- 2018-04-26 추가 -->
                    <div class="cont_bg">
                        <img src="/wp-content/uploads/2020/11/0153.jpg" alt="자기장 치료실" style="display: block;">
                        <img src="/wp-content/uploads/2020/11/0189.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0177.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0165.jpg" alt="자기장 치료실" style="display: none;">
                    </div>
                    <!-- //2018-04-26 추가 -->
                </li>
                <li class="on">
                    <span>1F</span>
                    <div style="z-index: 999;">
                        <h5>수술센터 1F</h5>
                        <ul>
                            <li class="on"><a href="javascript:void(0)">진료실</a></li>
                            <li class=""><a href="javascript:void(0)">회의실</a></li>
                            <li class=""><a href="javascript:void(0)">중환자케어센터</a></li>
                            <li class=""><a href="javascript:void(0)">대형견입원실</a></li>
                            <li class=""><a href="javascript:void(0)">회복실</a></li>
                        </ul>
                        <div style="position: absolute;
                        bottom: 10px;
                        right: 5px;">
                            <img src="/wp-content/uploads/2020/11/0364.jpg" alt="자기장 치료실" style="display: block;">
                            <img src="/wp-content/uploads/2020/11/0233.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0638.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0650.jpg" alt="자기장 치료실" style="display: none;">
                            <img src="/wp-content/uploads/2020/11/0410.jpg" alt="자기장 치료실" style="display: none;">
                        </div>
                    </div>
                    <!-- 2018-04-26 추가 -->
                    <div class="cont_bg">
                        <img id="index2" src="/wp-content/uploads/2020/11/0364.jpg" alt="자기장 치료실" style="display: block;">
                        <img src="/wp-content/uploads/2020/11/0233.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0638.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0650.jpg" alt="자기장 치료실" style="display: none;">
                        <img src="/wp-content/uploads/2020/11/0410.jpg" alt="자기장 치료실" style="display: none;">
                    </div>
                    <!-- //2018-04-26 추가 -->
                </li>
            </ul>
        </div>
    </div>
</div>

<script>
    (
        function($) {
    
            $(function(){
            var idx2 = 1;
            $('.floor_select').on('mouseenter', 'a', function(){
              var idx1 = $(this).index();
        
              $('.floor_select').find('img').stop().fadeOut(500).eq(idx1).stop().fadeIn(500);
            }).on('mouseleave', 'a', function(){
              var idx = $(this).index();
        
              $('.floor_select').find('img').stop().fadeOut(500).eq(idx2).stop().fadeIn(500);
            }).on('click', 'a', function(){
              idx2 = $(this).index();
        
              $('.floor_info > div').stop().hide().eq(idx2).stop().fadeIn(500);
            });
        
            $('.floor_info > div > ul > li').on('click', function(){
              $(this).addClass('on').siblings().removeClass('on');
            });
        
            $('.floor_info div ul li > div ul li a').on('click', function(){
              var idx = $(this).parent().index();
        
              $(this).parent().addClass('on').siblings().removeClass('on');
              $(this).parents('ul').siblings('div').find('img').stop().hide().eq(idx).stop().fadeIn(300);
              $(this).parents('.floor_info > div > ul > li').find('.cont_bg img').stop().hide().eq(idx).stop().fadeIn(300); //2018-04-26 추가
            });
          });
          $(document).ready(function() {				
              $('.health_floor').click();
              $('#health_floor').show().siblings('img').hide();
              // listAjaxCall();
              var index = "";
            $('.floor_info .fnav > li').click(function(){
                console.log($(index));
                if($(index).css('display') == "block") {
                    $(index).css('display', 'none');
                }
                index = $(this);
            });
          });
          $(function() {
                url = "/wweb/facilities/floor";
                localStorage.setItem('LOCATION_URL', url.split('/')[1]);
                onloadwfloor();
            });

            //로드
            function onloadwfloor() {
                listAjaxCall(url, '', function(data){
                    var mainFloor = -9999;
                    var healthFloor = -9999;
                    var kidsFloor = -9999;
                    
                    var mainCnt = 0;
                    var healthCnt = 0;
                    var kidsCnt = 0;
                    
                    var ext = '';
                    var tmp = '';
                    var floor = '';
                    
                    if (!isEmpty(data.floorList)) {
                        $(data.floorList).each(function(){
                            if (this.buildingType == 'M') {
                                if (mainFloor != this.floorNum) {
                                    mainFloor = this.floorNum;
                                    tmp = $('#mainOrg').clone();
                                    tmp.removeAttr('id');

                                    if (this.floorNum < 0) {
                                        floor = 'B' + Math.abs(this.floorNum)
                                    } else if (this.floorNum == 0) { 
                                        floor = 'L';
                                        $('#mainOrg').siblings('.on').removeClass('on');
                                        tmp.addClass('on');
                                    } else {
                                        floor = this.floorNum + 'F';
                                        if ($('#mainOrg').siblings('.on').length == 0 && this.floorNum == 1) {
                                            tmp.addClass('on')
                                        }
                                    }

                                    tmp.find('span:eq(0)').text(floor);
                                    
                                    tmp.find('h5').text('본관 ' + floor);
                                    $('div.main > ul').append(tmp);
                                    mainCnt++;
                                }
                                
                                tmp = $('div.main > ul > li:last');
                            } else if (this.buildingType == 'H') {
                                if (healthFloor != this.floorNum) {
                                    healthFloor = this.floorNum;
                                    tmp = $('#centerOrg').clone();
                                    tmp.removeAttr('id');

                                    if (this.floorNum < 0) {
                                        floor = 'B' + Math.abs(this.floorNum)
                                    } else if (this.floorNum == 0) { 
                                        floor = 'L';
                                        $('#centerOrg').siblings('.on').removeClass('on');
                                        tmp.addClass('on');
                                    } else {
                                        floor = this.floorNum + 'F';
                                        if ($('#centerOrg').siblings('.on').length == 0 && this.floorNum == 1) {
                                            tmp.addClass('on')
                                        }
                                    }

                                    tmp.find('span:eq(0)').text(floor);
                                    
                                    tmp.find('h5').text('국민건강검진센터 ' + floor);
                                    $('div.center > ul').append(tmp);
                                    healthCnt++;
                                }
                                
                                tmp = $('div.center > ul > li:last');
                            } else if (this.buildingType == 'K') {
                                if (kidsFloor != this.floorNum) {
                                    kidsFloor = this.floorNum;
                                    tmp = $('#kidOrg').clone();
                                    tmp.removeAttr('id');

                                    if (this.floorNum < 0) {
                                        floor = 'B' + Math.abs(this.floorNum)
                                    } else if (this.floorNum == 0) { 
                                        floor = 'L';
                                        $('#kidOrg').siblings('.on').removeClass('on');
                                        tmp.addClass('on');
                                    } else {
                                        floor = this.floorNum + 'F';
                                        if ($('#kidOrg').siblings('.on').length == 0 && this.floorNum == 1) {
                                            tmp.addClass('on')
                                        }
                                    }
                                    tmp.find('span:eq(0)').text(floor);
                                    
                                    tmp.find('h5').text('키즈센터 ' + floor);
                                    $('div.kid > ul').append(tmp);
                                    kidsCnt++;
                                }
                                
                                tmp = $('div.kid > ul > li:last');
                            }
                            
                            tmp.find('ul').append('<li><a href="javascript:void(0)">' + this.roomNameKor + '</a></li>');
                            
                            if (!isEmpty(this.mapImg)) {
                                ext = this.mapImg.split('.');
                                tmp.find('div > div').append('<img src="' + this.mapImgId + '.' + ext[1] + '" alt="' + this.roomNameKor + '" />');
                            } else {
                                tmp.find('div > div').append('<img src="" alt="' + this.roomNameKor + '" />');
                            }
                            
                            if (!isEmpty(this.bgImg)) {
                                ext = this.bgImg.split('.');
                                tmp.find('div.cont_bg').append('<img src="' + this.bgImgId + '.' + ext[1] + '" alt="' + this.roomNameKor + '" />');
                            } else {
                                tmp.find('div.cont_bg').append('<img src="" alt="' + this.roomNameKor + '" />');
                            }
                        });
                    }
                    
                    $('div.main > ul #mainOrg').remove();
                    $('div.center > ul #centerOrg').remove();
                    $('div.kid > ul #kidOrg').remove();
                    
                    $('div.main > ul > li.on ul li:last').addClass('on');
                    $('div.kid > ul > li.on ul li:last').addClass('on');
                    $('div.center > ul > li.on ul li:last').addClass('on');

                    if (mainCnt > 0) {
                        $('div.main').show();
                        $('.floor_select img:eq(1)').css({'opacity':'1', 'display':'block'});			
                    } else {
                        $('div.main').hide();
                    }
                    
                    if (healthCnt > 0 && mainCnt < 1) {
                        $('div.center').show();
                        $('.floor_select img:eq(0)').css({'opacity':'1', 'display':'inline'});
                    } else {
                        $('div.center').hide();
                    }
                    
                    if (kidsCnt > 0 && healthCnt < 1 && mainCnt < 1) {
                        $('div.kid').show();
                        $('.floor_select img:eq(2)').css({'opacity':'1', 'display':'block'});
                    } else {
                        $('div.kid').hide();
                    }			
                });
            }
            function isEmpty(s) {
                if (s == null || s == undefined || s == "" || (""+s).trim().length == 0 || s == "NULL") {
                    return true;
                }

                return false;
            }
          function listAjaxCall(_url, data, listCallBack) {
                // if (data == '') {
                // 	data = {};
                // }

                // 채용공고에서 locationType에 따라 list 보여주는게 달라지기 때문에,
                // locationType 값이 공백일때만, page LocationType 값을 넣어준다.
                // if (data.locationType != 0 && isEmpty(data.locationType)) {
                // 	var LOCATION_URL = localStorage.getItem('LOCATION_URL');
                // 	if (LOCATION_URL != null) {
                // 		if (LOCATION_URL == 'sweb') {
                // 			data.locationType = 1;
                // 		} else if (LOCATION_URL == 'wweb') {
                // 			data.locationType = 2; 
                // 		} else if (LOCATION_URL == 'en') {
                // 			data.locationType = 3; 
                // 		} else if (LOCATION_URL == 'cn') {
                // 			data.locationType = 5; 
                // 		} else if (LOCATION_URL == 'ru') {
                // 			data.locationType = 4; 
                // 		}
                // 	}
                // }
                
                $.ajax({
                    url: "/wp-content/uploads/2020/11/list.json",
                    type: 'GET',
                    data: JSON.stringify(data),
                    contentType: 'application/json; charset=UTF-8',
                    dataType: 'json',
                    async : false,
                    success: function(result) {
                        listCallBack(result);
                    },
                    error: function(xhr, status, error) {
                        commError(xhr);
                    }
                });	
            }
        }
      )(jQuery);
</script>